h1. Windows Terminal Environment Setup Guide

{toc}

----

{info}
*Who this guide is for:* Developers familiar with Fish shell on macOS or Linux who need to set up a productive terminal environment on Windows. This guide covers everything from Windows Terminal to Fish shell, tmux, Neovim, Starship, Yazi, and Volta.
{info}

{warning}
*Ghostty is not available on Windows.* If you use Ghostty on macOS or Linux, Windows Terminal is the closest equivalent and serves as the foundation for both setup tracks in this guide.
{warning}

This guide is structured around two tracks. *Track A (WSL2) is the recommended path* for anyone wanting an experience as close as possible to macOS or Linux.

||Track||Approach||Best For||
|*Track A: WSL2 (Recommended)*|Run Fish, tmux, and all tools inside WSL2 Ubuntu|Developers who want a near-identical Linux experience on Windows|
|*Track B: Native Windows*|PowerShell 7 + Windows Terminal + Starship|Developers who need native Windows tooling without a Linux layer|

{note}
*Line ending warning:* Windows uses CRLF line endings by default. Config files edited on Windows and used inside WSL2 can break silently due to `\r` characters. Always edit your WSL2 config files from inside the WSL2 terminal, or configure your editor to use LF endings. If you suspect a line ending issue, run {{dos2unix <filename>}} inside WSL2 to fix it.
{note}

----

h2. Step 1: Windows Terminal + PowerShell 7

This section applies to *both tracks* and is the foundation for everything that follows.

h3. Install Windows Terminal

Open PowerShell or Command Prompt and run:

{code:language=powershell}
winget install Microsoft.WindowsTerminal
{code}

Windows Terminal is a modern, tabbed terminal with support for multiple shells, GPU-accelerated rendering, and extensive customization. It is the recommended terminal host for both tracks.

Verify the installation by searching for "Windows Terminal" in the Start menu or running:

{code:language=powershell}
wt --version
{code}

h3. Install PowerShell 7

{code:language=powershell}
winget install Microsoft.PowerShell
{code}

Windows ships with Windows PowerShell 5.1, which is legacy. PowerShell 7 (also called PowerShell Core) is cross-platform, actively maintained, and required for a modern workflow.

*Set PowerShell 7 as the default profile:*

# Open Windows Terminal
# Go to *Settings* ({{Ctrl+,}})
# Under *Startup*, set *Default profile* to *PowerShell* (the one showing version 7.x)
# Save and restart Windows Terminal

Verify:

{code:language=powershell}
$PSVersionTable.PSVersion
{code}

Expected output: Major version 7 or higher.

h3. Install a Nerd Font

Nerd Fonts patch standard fonts with extra glyphs used by Starship, Neovim plugins, and other tools. Without a Nerd Font, you will see broken boxes or question marks in your prompt.

*Recommended fonts:*
* [CaskaydiaCove Nerd Font|https://www.nerdfonts.com/] — clean monospace, excellent readability
* MesloLGS NF — used in many popular prompt themes

Download from [https://www.nerdfonts.com/|https://www.nerdfonts.com/], unzip, right-click the {{.ttf}} files, and select *Install for all users*.

*Set the font in Windows Terminal:*

# Open Windows Terminal Settings ({{Ctrl+,}})
# Go to *Profiles* > *Default*
# Click *Appearance*
# Set *Font face* to your installed Nerd Font (e.g., {{CaskaydiaCove Nerd Font Mono}})
# Save

----

h2. Step 2: WSL2 Setup (Track A)

{info}
*Track A users only.* If you are following Track B (Native Windows), skip to Step 3.
{info}

WSL2 (Windows Subsystem for Linux 2) runs a real Linux kernel in a lightweight VM. It provides full compatibility with Linux tools, including Fish shell, tmux, and the complete Unix toolchain.

h3. Enable WSL2 and Install Ubuntu

Open PowerShell *as Administrator* and run:

{code:language=powershell}
wsl --install
{code}

This installs WSL2 with Ubuntu as the default distribution. A reboot is required.

To specify a distribution explicitly:

{code:language=powershell}
wsl --install -d Ubuntu
{code}

Ensure WSL2 is set as the default version:

{code:language=powershell}
wsl --set-default-version 2
{code}

h3. Initial Ubuntu Setup

After rebooting, Ubuntu will launch automatically and prompt you to create a Linux username and password. These are independent of your Windows credentials.

Update all packages:

{code:language=bash}
sudo apt update && sudo apt upgrade -y
{code}

h3. Accessing WSL2 Files

* *From Windows Explorer:* Navigate to {{\\wsl$\Ubuntu\home\<username>\}} in the address bar
* *Windows drives inside WSL2:* Mounted at {{/mnt/c/}}, {{/mnt/d/}}, etc.
* *From Windows Terminal:* Open a new tab and select the Ubuntu profile, which is automatically added after WSL2 installation

{note}
For best performance, keep your project files inside the WSL2 filesystem (e.g., {{~/projects/}}) rather than on {{/mnt/c/}}. Cross-filesystem I/O is significantly slower.
{note}

Verify WSL2 is running correctly:

{code:language=bash}
uname -r
{code}

Expected output: A kernel version string containing {{microsoft}} or {{WSL}}.

----

h2. Step 3: Fish Shell

h3. Track A — Fish in WSL2 (Ubuntu)

Add the Fish shell PPA and install:

{code:language=bash}
sudo apt-add-repository ppa:fish-shell/release-3
sudo apt update
sudo apt install fish
{code}

Register Fish as a valid login shell:

{code:language=bash}
echo $(which fish) | sudo tee -a /etc/shells
{code}

Set Fish as your default shell:

{code:language=bash}
chsh -s $(which fish)
{code}

Close and reopen your terminal. Fish should now be the default shell.

Verify:

{code:language=bash}
echo $SHELL
{code}

Expected output: {{/usr/bin/fish}}

*Fish config file location:* {{~/.config/fish/config.fish}}

A minimal starting config:

{code:language=none}
# ~/.config/fish/config.fish

# Starship prompt
starship init fish | source

# Volta
set -gx VOLTA_HOME "$HOME/.volta"
fish_add_path "$VOLTA_HOME/bin"

# Aliases
alias y="yazi"
{code}

*Yazi shell wrapper (y function)* — save to {{~/.config/fish/functions/y.fish}}:

{code:language=none}
function y
    set tmp (mktemp -t "yazi-cwd.XXXXXX")
    yazi $argv --cwd-file="$tmp"
    if set cwd (command cat -- "$tmp"); and [ -n "$cwd" ]; and [ "$cwd" != "$PWD" ]
        builtin cd -- "$cwd"
    end
    rm -f -- "$tmp"
end
{code}

This wrapper makes Yazi change the shell's working directory when you quit it, which is the standard recommended setup.

h3. Track B — PowerShell 7 on Native Windows

Fish shell is not available on native Windows. PowerShell 7 is the recommended shell for Track B users.

Create or edit your PowerShell profile:

{code:language=powershell}
notepad $PROFILE
{code}

If the file does not exist yet, create it first:

{code:language=powershell}
New-Item -ItemType File -Path $PROFILE -Force
{code}

Add the following to your profile:

{code:language=powershell}
# Starship prompt
Invoke-Expression (&starship init powershell)

# Volta is added to PATH automatically on Windows install
# Verify with: volta --version
{code}

----

h2. Step 4: tmux (Track A — WSL2 Only)

{info}
*Track A users only.* tmux is not available natively on Windows. Track B users can use Windows Terminal's built-in tabs and panes ({{Alt+Shift+D}} to split, {{Ctrl+Tab}} to switch tabs) as a partial alternative for session management.
{info}

h3. Install tmux

{code:language=bash}
sudo apt install tmux
{code}

Verify:

{code:language=bash}
tmux -V
{code}

h3. Configure tmux

Create the config directory and file:

{code:language=bash}
mkdir -p ~/.config/tmux
nano ~/.config/tmux/tmux.conf
{code}

Paste the following configuration:

{code:language=none}
# Shell
set-option -g default-shell /usr/bin/fish
set -g default-command "/usr/bin/fish -l"

# Terminal
set -g default-terminal "screen-256color"
set -g mouse on

# Prefix key: Ctrl-Space
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Vi mode
setw -g mode-keys vi

# Pane resizing (vi-style)
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5

# Intuitive splits
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# 1-based indexing
set -g base-index 1
setw -g pane-base-index 1

# Status bar
set -g status-bg colour235
set -g status-fg white
set -g status-interval 5
set -g status-left-length 40
set -g status-right-length 100
set -g status-left '#[fg=green]#S'
set -g status-right '#[fg=yellow]%Y-%m-%d #[fg=cyan]%H:%M'
set-window-option -g window-status-current-style fg=black,bg=green

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-yank'

run '~/.tmux/plugins/tpm/tpm'
{code}

h3. Install TPM (tmux Plugin Manager)

{code:language=bash}
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
{code}

Start a tmux session and install plugins:

{code:language=bash}
tmux new -s main
{code}

Inside tmux, press {{Ctrl-Space + I}} (capital I) to install all plugins. You should see a confirmation message after plugins finish installing.

Install {{xclip}} for clipboard support with {{tmux-yank}}:

{code:language=bash}
sudo apt install xclip
{code}

Verify tmux is working correctly:

{code:language=bash}
tmux ls
{code}

Expected output: a line showing your active session (e.g., {{main: 1 windows}}).

h3. Using tmux with Claude Code Agent Teams

Claude Code supports *agent teams* — multiple subagents running in parallel to complete tasks concurrently. tmux is the recommended way to monitor these agents because it lets you attach to and detach from running sessions without interrupting them.

*Key workflows:*

* *List all active sessions* (including agent sessions):
{code:language=bash}
tmux ls
{code}

* *Attach to an agent session* to observe its work:
{code:language=bash}
tmux attach -t <session-name>
{code}

* *Detach without stopping the session:* Press {{Ctrl-Space + d}}

* *Create a named session* so Claude Code can reliably find it:
{code:language=bash}
tmux new -s main
{code}

*Why tmux matters for agent teams:*

* The {{tmux-resurrect}} and {{tmux-continuum}} plugins preserve sessions across terminal restarts, meaning agent sessions survive accidental window closes
* Named sessions ({{-s main}}) give Claude Code a stable target to attach and detach from programmatically
* In WSL2, Claude Code agent teams work identically to Linux and macOS — no special configuration is needed
* Multiple panes let you watch several agents side by side in a single window

For more information on Claude Code agent teams, see [https://code.claude.com/docs/en/agent-teams|https://code.claude.com/docs/en/agent-teams].

----

h2. Step 5: Neovim

h3. Track A — Neovim in WSL2

Add the unstable PPA for a recent Neovim release:

{code:language=bash}
sudo add-apt-repository ppa:neovim-ppa/unstable
sudo apt update
sudo apt install neovim
{code}

Install required build tools and ripgrep:

{code:language=bash}
sudo apt install ripgrep build-essential
{code}

Install NvChad as a starter configuration:

{code:language=bash}
git clone https://github.com/NvChad/starter ~/.config/nvim && nvim
{code}

NvChad bootstraps itself with lazy.nvim on the first launch. Follow the on-screen prompts to complete installation.

Verify:

{code:language=bash}
nvim --version
{code}

h3. Track B — Neovim on Native Windows

{code:language=powershell}
winget install Neovim.Neovim
winget install BurntSushi.ripgrep.MSVC
{code}

The Neovim config directory on Windows is equivalent to {{~/.config/nvim/}} on Linux:

{code:language=powershell}
# Config location
$env:LOCALAPPDATA\nvim\
{code}

Install NvChad:

{code:language=powershell}
git clone https://github.com/NvChad/starter $env:LOCALAPPDATA\nvim
nvim
{code}

lazy.nvim installs everything automatically on the first launch.

{note}
Some Neovim plugins rely on Unix tools or POSIX behavior and may not work correctly on native Windows. WSL2 (Track A) provides a more reliable experience for the full Neovim ecosystem, especially for plugins that shell out to external commands.
{note}

Verify:

{code:language=powershell}
nvim --version
{code}

----

h2. Step 6: Starship Prompt

h3. Track A — Starship in WSL2

{code:language=bash}
curl -sS https://starship.rs/install.sh | sh
{code}

Add to {{~/.config/fish/config.fish}}:

{code:language=none}
starship init fish | source
{code}

Restart your shell or run {{source ~/.config/fish/config.fish}}.

Verify:

{code:language=bash}
starship --version
{code}

h3. Track B — Starship on Native Windows

{code:language=powershell}
winget install Starship.Starship
{code}

Add to your PowerShell profile ({{$PROFILE}}):

{code:language=powershell}
Invoke-Expression (&starship init powershell)
{code}

Reload your profile:

{code:language=powershell}
. $PROFILE
{code}

No custom config is needed — Starship uses sensible defaults out of the box. Custom configuration goes in {{~/.config/starship.toml}} (WSL2) or {{%USERPROFILE%\.config\starship.toml}} (Windows).

For full documentation and preset themes, see [https://starship.rs/|https://starship.rs/].

Verify:

{code:language=powershell}
starship --version
{code}

----

h2. Step 7: Yazi File Manager

Yazi is a blazing fast terminal file manager with preview support for images, PDFs, and more.

h3. Track A — Yazi in WSL2

*Option 1: Install via Cargo (build from source)*

First install Rust:

{code:language=bash}
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
{code}

Then install Yazi:

{code:language=bash}
cargo install --locked yazi-fm yazi-cli
{code}

*Option 2: Download a prebuilt binary*

Download the latest release from [https://github.com/sxyazi/yazi/releases|https://github.com/sxyazi/yazi/releases] and extract it to a directory on your {{PATH}} (e.g., {{~/.local/bin/}}).

*Install dependencies:*

{code:language=bash}
sudo apt install ffmpegthumbnailer p7zip-full jq poppler-utils fd-find ripgrep fzf zoxide imagemagick xclip
{code}

Install {{glow}} for Markdown previews — download the latest {{.deb}} from [https://github.com/charmbracelet/glow/releases|https://github.com/charmbracelet/glow/releases]:

{code:language=bash}
# Example — check the releases page for the current version
wget https://github.com/charmbracelet/glow/releases/latest/download/glow_Linux_x86_64.tar.gz
tar -xzf glow_Linux_x86_64.tar.gz
sudo mv glow /usr/local/bin/
{code}

h3. Track B — Yazi on Native Windows

{code:language=powershell}
winget install sxyazi.yazi
{code}

Install dependencies:

{code:language=powershell}
winget install sharkdp.fd
winget install BurntSushi.ripgrep.MSVC
winget install jqlang.jq
{code}

The Yazi config directory on Windows is {{%APPDATA%\yazi\config\}}.

*PowerShell y wrapper function* — add to your {{$PROFILE}}:

{code:language=powershell}
function y {
    $tmp = [System.IO.Path]::GetTempFileName()
    yazi $args --cwd-file="$tmp"
    $cwd = Get-Content -Raw $tmp
    if (-not [String]::IsNullOrEmpty($cwd) -and $cwd -ne $PWD.ProviderPath) {
        Set-Location -LiteralPath $cwd
    }
    Remove-Item -Path $tmp
}
{code}

h3. Yazi Configuration (Both Tracks)

These config files apply to both WSL2 and native Windows installs.

*Config location:*
* WSL2: {{~/.config/yazi/}}
* Windows: {{%APPDATA%\yazi\config\}}

Create {{yazi.toml}}:

{code:language=none}
[mgr]
show_hidden = true
ratio = [1, 3, 5]

[[plugin.prepend_previewers]]
name = "*.md"
run = 'piper -- glow -s dark "$1"'
{code}

h3. Install Yazi Plugins

{code:language=bash}
ya pack -a yazi-rs/plugins:bypass
ya pack -a yazi-rs/plugins:compress
ya pack -a yazi-rs/plugins:diff
ya pack -a yazi-rs/plugins:copy-file-contents
ya pack -a yazi-rs/plugins:what-size
ya pack -a yazi-rs/plugins:save-clipboard-to-file
{code}

Verify Yazi is installed and launches correctly:

{code:language=bash}
yazi --version
{code}

Then launch it with:

{code:language=bash}
y
{code}

----

h2. Step 8: Volta (Node.js Version Manager)

Volta is a fast, cross-platform Node.js toolchain manager that pins Node versions per project.

h3. Track A — Volta in WSL2

{code:language=bash}
curl https://get.volta.sh | bash
{code}

The installer adds Volta to your shell config automatically. For Fish shell, ensure the following is in {{~/.config/fish/config.fish}}:

{code:language=none}
set -gx VOLTA_HOME "$HOME/.volta"
fish_add_path "$VOLTA_HOME/bin"
{code}

Restart your shell, then install Node:

{code:language=bash}
volta install node
{code}

Verify:

{code:language=bash}
volta --version
node --version
{code}

h3. Track B — Volta on Native Windows

Download and run the Windows installer from [https://volta.sh|https://volta.sh], or install via winget:

{code:language=powershell}
winget install Volta.Volta
{code}

Volta automatically adds itself to the system PATH on Windows — no manual config is needed.

Restart Windows Terminal, then install Node:

{code:language=powershell}
volta install node
{code}

Verify:

{code:language=powershell}
volta --version
node --version
{code}

----

h2. Quick Reference

||Tool||Track A (WSL2) Install||Track B (Native Windows) Install||Config Location (WSL2)||Config Location (Windows)||
|Windows Terminal|Pre-installed / {{winget install Microsoft.WindowsTerminal}}|{{winget install Microsoft.WindowsTerminal}}|N/A|Settings UI / {{%LOCALAPPDATA%\Packages\...}}|
|PowerShell 7|Not needed in WSL2|{{winget install Microsoft.PowerShell}}|N/A|{{$PROFILE}}|
|Fish Shell|{{sudo apt install fish}}|Not available|{{~/.config/fish/config.fish}}|N/A|
|tmux|{{sudo apt install tmux}}|Not available|{{~/.config/tmux/tmux.conf}}|N/A|
|Neovim|{{sudo apt install neovim}}|{{winget install Neovim.Neovim}}|{{~/.config/nvim/}}|{{%LOCALAPPDATA%\nvim\}}|
|Starship|{{curl -sS https://starship.rs/install.sh \| sh}}|{{winget install Starship.Starship}}|{{~/.config/starship.toml}}|{{%USERPROFILE%\.config\starship.toml}}|
|Yazi|{{cargo install --locked yazi-fm yazi-cli}}|{{winget install sxyazi.yazi}}|{{~/.config/yazi/}}|{{%APPDATA%\yazi\config\}}|
|Volta|{{curl https://get.volta.sh \| bash}}|{{winget install Volta.Volta}}|{{~/.volta/}} (env vars in fish config)|Auto-managed|

----

h2. Common tmux Key Bindings Reference

||Key Binding||Action||
|{{Ctrl-Space}}|Prefix key|
|{{Prefix + d}}|Detach from session|
|{{Prefix + c}}|New window|
|{{Prefix + \|}}|Split pane horizontally|
|{{Prefix + -}}|Split pane vertically|
|{{Prefix + h/j/k/l}}|Resize pane (vi-style)|
|{{Prefix + I}}|Install tmux plugins (TPM)|
|{{Prefix + [}}|Enter copy mode (vi keys)|
|{{Prefix + s}}|List and switch sessions|

----

{info}
*Track recommendation summary:* If you want the closest possible experience to your existing macOS or Linux Fish shell setup, follow Track A (WSL2) throughout this guide. WSL2 gives you a genuine Linux environment, full compatibility with Unix tools, and the same tmux + Fish + Neovim workflow you already know. Track B is suitable when you specifically need native Windows tooling or cannot enable WSL2 on a managed corporate machine.
{info}
